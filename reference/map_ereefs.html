<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a surface map of eReefs model output. — map_ereefs • ereefs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a surface map of eReefs model output. — map_ereefs"><meta property="og:description" content="Creates a colour map showing concentrations of a specified eReefs model output variable at a specified
model layer (by default, the surface layer). The map is optionally (and by default) overlain on a map
of Queensland (if off the Queensland coast).
By Barbara Robson (AIMS)."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ereefs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/about.html">eReefs and the ereefs package</a>
    </li>
    <li>
      <a href="../articles/howto.html">General usage</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a surface map of eReefs model output.</h1>
    
    <div class="hidden name"><code>map_ereefs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a colour map showing concentrations of a specified eReefs model output variable at a specified
model layer (by default, the surface layer). The map is optionally (and by default) overlain on a map
of Queensland (if off the Queensland coast).
By Barbara Robson (AIMS).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">map_ereefs</span><span class="op">(</span></span>
<span>  var_name <span class="op">=</span> <span class="st">"true_colour"</span>,</span>
<span>  target_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2018</span>, <span class="fl">1</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  layer <span class="op">=</span> <span class="st">"surface"</span>,</span>
<span>  Land_map <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  input_file <span class="op">=</span> <span class="st">"catalog"</span>,</span>
<span>  input_grid <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  scale_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ivory"</span>, <span class="st">"coral4"</span><span class="op">)</span>,</span>
<span>  scale_lim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  zoom <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  box_bounds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  p <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  suppress_print <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  return_poly <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  label_towns <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  strict_bounds <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mark_points <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gbr_poly <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>var_name</dt>
<dd><p>Short name of the variable to plot. This can be any variable in the
eReefs netcdf file that you are accessing (refer to eReefs model
documentation or extract variable names from the netcdf file for a full 
list). In addition, two special var_name values are supported: 'true_colour'
and 'plume'. 'true_colour' provides a simulated MODIS true colour
image (refer to Baird et al., 2016 for en explanation).'plume'
provides a map of calculated plume colour class as per Devlin et al. (2012)
and Baird et al. (2017). Defaults to true_colour.</p></dd>


<dt>target_date</dt>
<dd><p>Date to map. Can either be a) a vector of integers in the format 
c(year, month, day); b) a date obtained e.g. from as.Date(); or c) a character string 
     formatted for input to as.Date(). Defaults to c(2018,1,30). Be careful to choose the right
     input file, as the function will plot the closest date in the file to the target date without
     complaint, however far fron the target that may be. Assumes that dates in the netcdf files are
     relative to 1990-01-01 (this is not checked).</p></dd>


<dt>layer</dt>
<dd><p>Either a (positive) integer layer number, a negative number indicating depth below MSL (not depth below the free surface) 
or 'surface' to choose the surface layer. Defaults to 'surface'.</p></dd>


<dt>Land_map</dt>
<dd><p>Set to TRUE to show a map of Queensland as an underlay for the model output plot. No longer requires the fgmap library 
and an activated Google API key but also doesn't show maps for other locations
Default now FALSE.</p></dd>


<dt>input_file</dt>
<dd><p>is the URL or file location of any of the EMS output files or a THREDDS catalog URI. 
Defaults to a menu selection based on current NCI catalogs. Can also be set to "nci", "menu" or "catalog" for the same behaviour.
Set to "old_menu" to provide old menu options instead of menu options from the NCI catalog.
Numeric values are interpreted as references to selections available from the old menu.
Short codes can be used for some options (codenames as used in https://research.csiro.au/ereefs/models/model-outputs/access-to-raw-model-output/ )</p></dd>


<dt>input_grid</dt>
<dd><p>Name of the locally-stored or opendap-served netcdf file that contains the grid
coordinates for the cell corners (x_grid and y_grid). If not specified, the function will first look for
x_grid and y_grid can be found in the first INPUT_STEM file, and if not found, will check whether the size 
of the variables in the input file corresponds to the size expected for GBR4 or GBR1, and load appropriate 
x and y grids from data files stored in this package. Alternatively, you can provide the location of a full 
(not simple-format) ereefs netcdf output file such as 
"http://dapds00.nci.org.au/thredds/dodsC/fx3/gbr4_hydro_all/gbr4_all_2016-09.nc"</p></dd>


<dt>scale_col</dt>
<dd><p>Vector of colours to use for low and high values in the colour scale. This can be a colour 
from the ggplot colour palette or a RGB hash code, or "spectral". Ignored for true_colour plots. 
If one value is given (other than "spectral"), low colour is set to ivory and high colour to the value given.
If three values are given, uses scale_fill_gradient2 (spectrum from low to high through middle value).
Defaults to c('ivory', 'coral4').</p></dd>


<dt>scale_lim</dt>
<dd><p>Upper and lower bounds for colour scale. Defaults to full range of data.
Ignored for true_colour plots.</p></dd>


<dt>box_bounds</dt>
<dd><p>Minimum and maximum latitude and longitude coordinates to map. Defaults to the
entire extent of the model output (though modified by the value of zoom). 
Format: c(longitude_min, longitude_max, latitude_min, latitude_max).</p></dd>


<dt>p</dt>
<dd><p>Handle for an existing figure if you want to add a layer instead of creating a new figure.
If p is provided, Land_map is over-ridden and set to FALSE.</p></dd>


<dt>suppress_print</dt>
<dd><p>Set to TRUE if you don't want the plots generated and saved. Defaults to TRUE.</p></dd>


<dt>return_poly</dt>
<dd><p>Instead of only the figure handle, return a list containing the figure handle and the dataframe used by geom_plot(). Default FALSE.</p></dd>


<dt>label_towns</dt>
<dd><p>Add labels for town locations to the figure. Default TRUE</p></dd>


<dt>strict_bounds</dt>
<dd><p>Obsolescent: ignored</p></dd>


<dt>mark_points</dt>
<dd><p>Data frame containing longitude and latitude of geolocations to mark with crosses (or a vector containing one location). Default NULL.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a ggplot object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>References:</p>
<p>Baird, M.E., Cherukuru, N., Jones, E., Margvelashvili, N., Mongin, M., Oubelkheir, K., 
  Ralph, P.J., Rizwi, F., Robson, B.J., Schroeder, T. and Skerratt, J., 2016. Remote-sensing 
  reflectance and true colour produced by a coupled hydrodynamic, optical, sediment, 
  biogeochemical model of the Great Barrier Reef, Australia: comparison with satellite data. 
  Environmental Modelling &amp; Software, 78, pp.79-96.</p>
<p>Baird, M.E., Andrewartha, J., Herzfeld, M., Jones, E.M., Margvelashvili, N., Mongin, M., Rizwi, 
  F.,  Skerratt, J., Soja-Wozniak, M., Wild-Allen, K., Schroe der, T., Robson, B.J., da Silva, E. 
  and Devlin, M., 2017. River plumes of the Great Barrier Reef: freshwater , sediment and optical 
  footprints quantified by the eReefs modelling system  In Syme, G., Hatton MacDonald, D., Fulton, 
  B. and Piantadosi, J. (eds) MODSIM2017, 22nd International Congress on Modelling and Simulation. 
  Modelling and Simulation Society of Australia and New Zealand, December 2017, pp. 894–900</p>
<p>Devlin, M.J., McKinna, L.W., Álvarez-Romero, J.G., Petus, C., Abott, B., Harkness, P. and 
  Brodie, J., 2012. Mapping the pollutants in surface riverine flood plume waters in the Great 
  Barrier Reef, Australia. Marine pollution bulletin, 65(4-9), pp.224-235.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">map_ereefs</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">map_ereefs</span><span class="op">(</span><span class="st">'TN'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">map_ereefs</span><span class="op">(</span><span class="st">'plume'</span>, target_date<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2011</span>, <span class="fl">1</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">map_ereefs</span><span class="op">(</span><span class="st">'Chl_a_sum'</span>, target_date<span class="op">=</span><span class="st">'2016-07-15'</span>, scale_col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ivory'</span>, <span class="st">'green4'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">map_ereefs</span><span class="op">(</span><span class="st">'salt'</span>, box_bounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">145</span>,<span class="fl">150</span>,<span class="op">-</span><span class="fl">20</span>,<span class="op">-</span><span class="fl">15</span><span class="op">)</span>, zoom<span class="op">=</span><span class="fl">7</span>, scale_lim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">32</span>,<span class="fl">35</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Barbara Robson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

